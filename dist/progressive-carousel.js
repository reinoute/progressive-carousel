var Carousel=function(){"use strict";function e(e){function t(){var e=document.createElement("div"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var t in n)if(void 0!==e.style[t])return n[t]}function r(){H=q[0].offsetWidth;var e=window.getComputedStyle(q[0],null).getPropertyValue("transform").replace(/[^0-9\-.,]/g,"").split(",");_=parseInt(e[12])||parseInt(e[4])}function l(e){e.preventDefault(),0===e.detail&&!W&&g()}function i(e){e.preventDefault(),N=e.targetTouches[0].clientX}function s(){c(event.changedTouches[0].clientX)}function c(e){q.forEach(function(e){return e.style[M]=""});var n=H/8,t=e-N;Math.abs(t)<10?W?m(X.LEFT):g():m(t<0&&Math.abs(t)>n?X.LEFT:t>n?X.RIGHT:X.INITIAL),N=null}function u(e){N&&a(e.changedTouches[0].clientX)}function a(e){var n=_+(e-N),t=Math.max(Math.min(_+H,n),_-H);q.forEach(function(e){return e.style[M]="translateX("+t+"px)"})}function o(e){return function(n){n.preventDefault(),N=n.clientX,e.addEventListener("mousemove",d,{passive:!0})}.bind(this)}function f(e){return function(n){c(n.clientX),e.removeEventListener("mousemove",d)}.bind(this)}function d(e){N&&!q.some(function(e){return v(e)})&&a(e.clientX)}function m(n){var t=[].slice.call(e.querySelectorAll(p.itemSelector));t.some(function(e){return v(e)})||t.forEach(function(e,t){e.addEventListener(R,h(e,t,n)),e.classList.add(E(n))})}function v(e){return[p.animateLeftClass,p.animateRightClass,p.animateInitialClass].some(function(n){return e.classList.contains(n)})}function E(e){return e===X.LEFT?p.animateLeftClass:e===X.RIGHT?p.animateRightClass:e===X.INITIAL?p.animateInitialClass:null}function h(e,n,t){var r=function(){e.removeEventListener(R,r);var l=0===n;t===X.LEFT&&l&&(k.appendChild(e),b());var i=n===q.length-1;t===X.RIGHT&&i&&(k.insertBefore(e,k.firstElementChild),b()),e.classList.remove(E(t))}.bind(this);return r}function b(){[].slice.call(e.querySelectorAll(p.anchorSelector)).forEach(function(e,n){var t=Math.abs(_/H);W?e.setAttribute("tabindex",-1):n===t?e.setAttribute("tabindex",0):e.setAttribute("tabindex",-1)})}function L(e){var n=document.activeElement===I,t=document.activeElement===C;e.shiftKey&&n?(e.preventDefault(),C.focus()):!e.shiftKey&&t&&(e.preventDefault(),I.focus())}function g(){W=!0,z.forEach(function(e){return F(e)}),e.classList.add(p.fullscreenClass),document.body.classList.add(p.scrollDisabledClass),z.forEach(function(e){return e.sizes="100vw"}),r(),x.forEach(function(e){return e.setAttribute("tabindex",-1)}),I.focus(),n.fullscreenEnabled&&n.requestFullscreen(e)}function w(){W=!1,n.fullscreenEnabled&&null!==n.fullscreenElement&&n.exitFullscreen(),z.forEach(function(e){return F(e)}),e.classList.remove(p.fullscreenClass),document.body.classList.remove(p.scrollDisabledClass),z.forEach(function(e){return e.sizes=G}),r(),b();var t=x.filter(function(e){return"0"===e.getAttribute("tabindex")});t&&t.length>0&&t[0].focus()}function F(e){var n=e.getAttribute(p.originalSrcAttribute);if(n)e.src=n,e.removeAttribute(p.originalSrcAttribute);else{var t=e.getAttribute("srcset").split(",").map(function(e){var n=e.trim().split(" ");return{url:n[0],width:parseInt(n[1].replace("w",""))}}).reduce(function(e,n){return n.width>e.width?n:e},{url:e.src,width:e.naturalWidth});e.setAttribute(p.originalSrcAttribute,e.src),e.src=t.url}}var T=this,p={itemSelector:"[data-carousel-item]",anchorSelector:"[data-carousel-anchor]",fullscreenClass:"is-fullscreen",scrollDisabledClass:"scroll-disabled",animateLeftClass:"is-animating-left",animateRightClass:"is-animating-right",animateInitialClass:"is-animating-initial",originalSrcAttribute:"data-carousel-original-src"},S="classList"in document.documentElement,y=t();if(S&&y){e.classList.add("is-enhanced");var C=e.querySelector("[data-carousel-next]"),A=e.querySelector("[data-carousel-previous]"),I=e.querySelector("[data-carousel-close]"),k=e.querySelector("[data-carousel-list]"),q=[].slice.call(e.querySelectorAll(p.itemSelector)),x=[].slice.call(e.querySelectorAll(p.anchorSelector)),z=[].slice.call(e.querySelectorAll("[data-carousel-img]")),R=t(),M=function(){for(var e=["transform","msTransform","webkitTransform","mozTransform","oTransform"],n=0;n<e.length;n++)if(void 0!==document.body.style[e[n]])return e[n];return null}(),D=z[0],X={LEFT:-1,INITIAL:0,RIGHT:1},G=D.sizes,H=null,_=null,N=null,O=null,W=!1;window.addEventListener("resize",function(){clearTimeout(O),O=setTimeout(function(){r()}.bind(T),100)}),e.addEventListener("click",function(n){var t=n.target===e;W&&t&&w()}),e.addEventListener("keydown",function(e){if(W)switch(e.which){case 27:w();break;case 37:m(X.RIGHT);break;case 39:m(X.LEFT);break;case 9:L(e)}}),q.forEach(function(e){e.addEventListener("touchstart",i),e.addEventListener("touchend",s),e.addEventListener("touchmove",u,{passive:!0}),e.addEventListener("mousedown",o(e)),e.addEventListener("mouseup",f(e))}),x.forEach(function(e){e.addEventListener("click",l)}),D.addEventListener("load",function(){r(),b()}),C.addEventListener("click",function(){return m(X.LEFT)}),A.addEventListener("click",function(){return m(X.RIGHT)}),I.addEventListener("click",w),n.addEventListener("fullscreenchange",function(){null===n.fullscreenElement&&w()},!1)}}var n=function(e){return e&&e.__esModule?e.default:e}(function(e,n){return n={exports:{}},e(n,n.exports),n.exports}(function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var t={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},r=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],l=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],i=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],s="undefined"!=typeof window&&void 0!==window.document?window.document:{},c="fullscreenEnabled"in s&&Object.keys(t)||r[0]in s&&r||l[0]in s&&l||i[0]in s&&i||[];n.default={requestFullscreen:function(e){return e[c[t.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[c[t.requestFullscreen]]},get exitFullscreen(){return s[c[t.exitFullscreen]].bind(s)},addEventListener:function(e,n,r){return s.addEventListener(c[t[e]],n,r)},removeEventListener:function(e,n){return s.removeEventListener(c[t[e]],n)},get fullscreenEnabled(){return Boolean(s[c[t.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return s[c[t.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return s[("on"+c[t.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return s[("on"+c[t.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return s[("on"+c[t.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return s[("on"+c[t.fullscreenerror]).toLowerCase()]=e}}}));return{enhanceAll:function(){return[].slice.call(document.querySelectorAll("[data-carousel]")).map(function(n){return new e(n)})}}}();
